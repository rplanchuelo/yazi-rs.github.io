"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[623],{2266:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>a,frontMatter:()=>d,metadata:()=>h,toc:()=>o});var n=s(1527),l=s(6225);const d={sidebar_position:1,description:"Learn how to use Yazi's Lua API."},r="Common",h={id:"plugins/common",title:"Common",description:"Learn how to use Yazi's Lua API.",source:"@site/docs/plugins/common.md",sourceDirName:"plugins",slug:"/plugins/common",permalink:"/docs/plugins/common",draft:!1,unlisted:!1,editUrl:"https://github.com/yazi-rs/yazi-rs.github.io/edit/main/docs/plugins/common.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"Learn how to use Yazi's Lua API."},sidebar:"docsSidebar",previous:{title:"Plugin",permalink:"/docs/plugins/overview"},next:{title:"Layout",permalink:"/docs/plugins/layout"}},c={},o=[{value:"Shared",id:"shared",level:2},{value:"Cha",id:"cha",level:3},{value:"File",id:"file",level:3},{value:"Icon",id:"icon",level:3},{value:"Range",id:"range",level:3},{value:"Url",id:"url",level:3},{value:"Window",id:"window",level:3},{value:"App data",id:"app-data",level:2},{value:"<code>tab::Mode</code>",id:"tabmode",level:3},{value:"<code>tab::Config</code>",id:"tabconfig",level:3},{value:"<code>tab::Preview</code>",id:"tabpreview",level:3},{value:"<code>folder::Folder</code>",id:"folderfolder",level:3},{value:"<code>folder::Files</code>",id:"folderfiles",level:3},{value:"<code>folder::File</code>",id:"folderfile",level:3},{value:"<code>manager::Tabs</code>",id:"managertabs",level:3},{value:"<code>tab::Tab</code>",id:"tabtab",level:3},{value:"<code>tasks::Tasks</code>",id:"taskstasks",level:3}];function t(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h1,{id:"common",children:"Common"}),"\n",(0,n.jsx)(i.h2,{id:"shared",children:"Shared"}),"\n",(0,n.jsx)(i.h3,{id:"cha",children:"Cha"}),"\n",(0,n.jsx)(i.p,{children:"Cha means one file's characteristics with the following properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_dir"}),": Whether this file is a directory"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_hidden"}),": Whether this file is hidden (starts with a dot)"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_link"}),": Whether this file is a symlink"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_orphan"}),": Whether this file is a bad symlink, which points to a non-existent file"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_block_device"}),": Whether this file is a block device"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_char_device"}),": Whether this file is a character device"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_fifo"}),": Whether this file is a fifo"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_socket"}),": Whether this file is a socket"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"length"}),": The length of this file, returns an integer representing the size in bytes. Note that it can't reflect the size of a directory, use ",(0,n.jsx)(i.a,{href:"#folderfile",children:(0,n.jsx)(i.code,{children:"size()"})})," instead"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"created"}),": The created time of this file in Unix timestamp, or ",(0,n.jsx)(i.code,{children:"nil"})," if it doesn't have a valid time"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"modified"}),": The modified time of this file in Unix timestamp, or ",(0,n.jsx)(i.code,{children:"nil"})," if it doesn't have a valid time"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"accessed"}),": The accessed time of this file in Unix timestamp, or ",(0,n.jsx)(i.code,{children:"nil"})," if it doesn't have a valid time"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"permissions"}),": Unix permissions of this file in string, e.g. ",(0,n.jsx)(i.code,{children:"drwxr-xr-x"}),". For Windows, it's always ",(0,n.jsx)(i.code,{children:"nil"})]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"And the Unix only properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"uid"}),": The user id of this file"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"gid"}),": The group id of this file"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"file",children:"File"}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"url"}),": The ",(0,n.jsx)(i.a,{href:"#url",children:"Url"})," of this file"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cha"}),": The ",(0,n.jsx)(i.a,{href:"#cha",children:"Cha"})," of this file"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"link_to"}),": The ",(0,n.jsx)(i.a,{href:"#url",children:"Url"})," of this file pointing to, if it's a symlink; otherwise, ",(0,n.jsx)(i.code,{children:"nil"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"name"}),": The name of this file"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"icon",children:"Icon"}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"text"}),": The text of this icon"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"style"}),": The ",(0,n.jsx)(i.a,{href:"#uistyle",children:"Style"})," of this icon"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"range",children:"Range"}),"\n",(0,n.jsx)(i.p,{children:"TODO"}),"\n",(0,n.jsx)(i.h3,{id:"url",children:"Url"}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"frag"}),": The fragment string of this url. Let's say the url is ",(0,n.jsx)(i.code,{children:"archive:///root/my-archive.zip#1.jpg"}),", then the fragment is ",(0,n.jsx)(i.code,{children:"1.jpg"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_regular"}),": Whether the file represented by this url is a regular file"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_search"}),": Whether the file represented by this url from the search result"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_archive"}),": Whether the file represented by this url from an archive"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Meta methods:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__eq(another_url)"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__tostring()"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__concat(string)"})}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"window",children:"Window"}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"rows"}),": The number of rows of this window"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cols"}),": The number of columns of this window"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"width"}),": The width of this window in pixels"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"height"}),": The height of this window in pixels"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"app-data",children:"App data"}),"\n",(0,n.jsxs)(i.p,{children:["You can access all app data through the ",(0,n.jsx)(i.code,{children:"cx"})," within ",(0,n.jsx)(i.a,{href:"/docs/plugins/overview#sync-context",children:"Sync context"}),":"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cx.active"}),": The active tab, which is a ",(0,n.jsx)(i.a,{href:"#tabtab",children:"tab::Tab"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cx.tabs"}),": All of tabs, which is a ",(0,n.jsx)(i.a,{href:"#managertabs",children:"manager::Tabs"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cx.tasks"}),": All of tasks, which is a ",(0,n.jsx)(i.a,{href:"#taskstasks",children:"tasks::Tasks"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"tabmode",children:(0,n.jsx)(i.code,{children:"tab::Mode"})}),"\n",(0,n.jsx)(i.p,{children:"Visual mode status."}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_select"}),": Whether the mode is select"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_unset"}),": Whether the mode is unset"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_visual"}),": Whether the mode is select or unset"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Methods:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"pending(idx, state)"}),": TODO"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Meta methods:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__tostring()"})}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"tabconfig",children:(0,n.jsx)(i.code,{children:"tab::Config"})}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"sort_by"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"sort_sensitive"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"sort_reverse"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"sort_dir_first"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"linemode"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"show_hidden"})}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["These properties are consistent with those in ",(0,n.jsx)(i.a,{href:"/docs/configuration/yazi",children:"yazi.toml"}),", and will not be detailed here."]}),"\n",(0,n.jsx)(i.h3,{id:"tabpreview",children:(0,n.jsx)(i.code,{children:"tab::Preview"})}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"skip"})," - The number of units to skip. The units largely depend on your previewer, such as lines for code and percentages for videos."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"folder"})," - The ",(0,n.jsx)(i.a,{href:"#folderfolder",children:"folder::Folder"})," being previewed, or ",(0,n.jsx)(i.code,{children:"nil"})," if this preview is not for folders"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"folderfolder",children:(0,n.jsx)(i.code,{children:"folder::Folder"})}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cwd"})," - The current working directory of this folder, which is a ",(0,n.jsx)(i.a,{href:"#url",children:"Url"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"offset"})," - The offset of this folder, which is an integer"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cursor"})," - The cursor position of this folder, which is an integer"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"window"})," - A table of ",(0,n.jsx)(i.a,{href:"#file",children:"File"})," in the visible area of this folder"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"files"})," - The ",(0,n.jsx)(i.a,{href:"#folderfiles",children:(0,n.jsx)(i.code,{children:"folder::Files"})})," of this folder"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"hovered"})," - The hovered ",(0,n.jsx)(i.a,{href:"#file",children:"File"})," of this folder, or ",(0,n.jsx)(i.code,{children:"nil"})," if there is no hovered file"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"folderfiles",children:(0,n.jsx)(i.code,{children:"folder::Files"})}),"\n",(0,n.jsx)(i.p,{children:"Meta methods:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__len()"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__pairs()"})}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"folderfile",children:(0,n.jsx)(i.code,{children:"folder::File"})}),"\n",(0,n.jsxs)(i.p,{children:["Based on ",(0,n.jsx)(i.a,{href:"#file",children:"File"}),", with the following additional methods:"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"size()"})," - The size of this file, returns an integer representing the size in bytes, or ",(0,n.jsx)(i.code,{children:"nil"})," if its a directory and it has not been scanned"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"mime()"})," - The mime-type string of this file"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"prefix()"})," - The prefix of this file relative to ",(0,n.jsx)(i.code,{children:"CWD"}),", which used in the flat view during search. For instance, if ",(0,n.jsx)(i.code,{children:"CWD"})," is ",(0,n.jsx)(i.code,{children:"/foo"}),", and the file is ",(0,n.jsx)(i.code,{children:"/foo/bar/baz"}),", then the prefix is ",(0,n.jsx)(i.code,{children:"bar/"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"icon()"})," - The ",(0,n.jsx)(i.a,{href:"#icon",children:"Icon"})," of this file, ",(0,n.jsx)(i.a,{href:"/docs/configuration/theme#icons",children:(0,n.jsx)(i.code,{children:"[icon]"})})," rules are applied; if no rule matches, returns ",(0,n.jsx)(i.code,{children:"nil"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"style()"})," - The ",(0,n.jsx)(i.a,{href:"#uistyle",children:"Style"})," of this file, ",(0,n.jsx)(i.a,{href:"/docs/configuration/theme#filetype",children:(0,n.jsx)(i.code,{children:"[filetype]"})})," rules are applied; if no rule matches, returns ",(0,n.jsx)(i.code,{children:"nil"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_hovered()"})," - Whether this file is hovered"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_yanked()"})," - Whether this file is yanked"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"is_selected()"})," - Whether this file is selected"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"found()"})," - When users find a file using the ",(0,n.jsx)(i.code,{children:"find"})," command, the status of the file - returns ",(0,n.jsx)(i.code,{children:"nil"})," if it doesn't match the user's find keyword; otherwise, returns ",(0,n.jsx)(i.code,{children:"{idx, all}"}),", where ",(0,n.jsx)(i.code,{children:"idx"})," is the position of matched file, and ",(0,n.jsx)(i.code,{children:"all"})," represents the number of all matched files."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"highlights()"})," - TODO"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"managertabs",children:(0,n.jsx)(i.code,{children:"manager::Tabs"})}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"idx"}),": The index of the active tab"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Meta methods:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__len()"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"__index(idx)"})}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"tabtab",children:(0,n.jsx)(i.code,{children:"tab::Tab"})}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"mode"}),": The ",(0,n.jsx)(i.a,{href:"#tabmode",children:"tab::Mode"})," of this tab"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"conf"}),": The ",(0,n.jsx)(i.a,{href:"#tabconfig",children:"tab::Config"})," of this tab"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"parent"}),": The parent folder within this tab, which is a ",(0,n.jsx)(i.a,{href:"#folderfolder",children:"folder::Folder"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"current"}),": The current folder within this tab, which is a ",(0,n.jsx)(i.a,{href:"#folderfolder",children:"folder::Folder"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"preview"}),": The ",(0,n.jsx)(i.a,{href:"#tabpreview",children:"tab::Preview"})," within this tab"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Methods:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"name()"}),": The name of this tab"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"taskstasks",children:(0,n.jsx)(i.code,{children:"tasks::Tasks"})}),"\n",(0,n.jsx)(i.p,{children:"Properties:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"progress"}),": The progress of all tasks, which is a table:"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-lua",children:"{\n\t-- Number of tasks\n\ttotal = 0,\n\tsucc  = 0,\n\tfail  = 0,\n\n\t-- Workload of tasks\n\tfound     = 0,\n\tprocessed = 0,\n}\n"})}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:i}={...(0,l.a)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}},6225:(e,i,s)=>{s.d(i,{Z:()=>h,a:()=>r});var n=s(959);const l={},d=n.createContext(l);function r(e){const i=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function h(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),n.createElement(d.Provider,{value:i},e.children)}}}]);